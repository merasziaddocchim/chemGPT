(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{22:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat",function(){return r(6911)}])},6911:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var n=r(5893),s=r(1163),o=r(7294),l=r(1664),a=r.n(l),c=e=>{let{children:t}=e;return(0,n.jsxs)("div",{className:"flex h-screen bg-gray-50 text-gray-900",children:[(0,n.jsxs)("aside",{className:"w-60 bg-gray-900 text-white flex flex-col justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(a(),{href:"/",className:"text-2xl font-semibold px-6 py-4 block",children:"ChemGPT"}),(0,n.jsxs)("nav",{className:"flex flex-col gap-4 px-6 mt-6 text-sm",children:[(0,n.jsx)(a(),{href:"/chat",className:"hover:text-blue-300",children:"\uD83D\uDCAC Chat"}),(0,n.jsx)(a(),{href:"/molecule",className:"hover:text-blue-300",children:"\uD83E\uDDEC Molecule"}),(0,n.jsx)(a(),{href:"/retro",className:"hover:text-blue-300",children:"\uD83D\uDD04 Retro"}),(0,n.jsx)(a(),{href:"/spectro",className:"hover:text-blue-300",children:"\uD83E\uDDEA Spectro"})]})]}),(0,n.jsx)("footer",{className:"px-6 py-4 text-xs text-gray-400",children:"Built by MERAS ZIAD \xb7 chemgpt.app"})]}),(0,n.jsx)("main",{className:"flex-1 flex flex-col overflow-hidden bg-white",children:t})]})},i=e=>{let{role:t,content:r}=e,s="";return s="object"==typeof r&&null!==r&&"answer"in r?r.answer||"":"string"==typeof r?r:JSON.stringify(r,null,2),(0,n.jsx)("div",{style:{background:"user"===t?"#cce3ff":"#f0f0f0",color:"user"===t?"#08335c":"#111",borderRadius:14,padding:"14px 18px",margin:"12px 0",maxWidth:"85%",alignSelf:"user"===t?"flex-end":"flex-start",whiteSpace:"pre-wrap",fontSize:16,boxShadow:"user"===t?"0 2px 8px rgba(80,160,255,0.10)":"0 2px 8px rgba(0,0,0,0.06)"},children:s})},u=e=>{let{messages:t}=e,r=(0,o.useRef)(null);return(0,o.useEffect)(()=>{var e;null===(e=r.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[t]),(0,n.jsxs)("div",{className:"flex-1 px-6 py-4 overflow-y-auto",children:[t.map((e,t)=>(0,n.jsx)(i,{role:e.role,content:e.content},t)),(0,n.jsx)("div",{ref:r})]})},x=e=>{let{initialQuery:t=""}=e,[r,l]=(0,o.useState)([]),[a,c]=(0,o.useState)(""),[i,x]=(0,o.useState)(!1);(0,s.useRouter)();let f=(0,o.useCallback)(async e=>{let t="string"==typeof e?e:a;if(!t.trim()||i)return;x(!0);let r={role:"user",content:t};l(e=>[...e,r]),c("");try{let e=await fetch("https://chemgpt-pro.onrender.com/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:t})});if(!e.ok){let t=await e.text();l(r=>[...r,{role:"bot",content:"Server error (code: ".concat(e.status,").\n").concat(t||"Please try again.")}]),x(!1);return}let r=await e.json();r&&"string"==typeof r.answer?l(e=>[...e,{role:"bot",content:r.answer}]):l(e=>[...e,{role:"bot",content:"Invalid response from the server."}])}catch(e){l(e=>[...e,{role:"bot",content:"Network error. Please check your connection and try again."}])}x(!1)},[a,i]);return(0,o.useEffect)(()=>{t&&f(t)},[t]),(0,n.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,n.jsx)(u,{messages:r}),(0,n.jsxs)("footer",{className:"px-6 py-4 border-t flex items-center space-x-2",children:[(0,n.jsx)("input",{value:a,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"!==e.key||i||(e.preventDefault(),f())},placeholder:"Ask ChemGPT something...",className:"flex-1 border border-gray-300 rounded px-4 py-2",disabled:i,autoFocus:!0}),(0,n.jsx)("button",{onClick:()=>f(),className:"bg-blue-600 text-white px-4 py-2 rounded ".concat(i?"opacity-60 cursor-not-allowed":""),disabled:i,children:i?"Sending...":"Send"})]})]})};function f(){let e=(0,s.useRouter)(),[t,r]=(0,o.useState)("");return(0,o.useEffect)(()=>{"string"==typeof e.query.question&&r(e.query.question)},[e.query.question]),(0,n.jsx)(c,{children:(0,n.jsx)(x,{initialQuery:t})})}},1163:function(e,t,r){e.exports=r(3035)}},function(e){e.O(0,[664,888,774,179],function(){return e(e.s=22)}),_N_E=e.O()}]);